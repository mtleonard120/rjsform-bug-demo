(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){e.exports=a(266)},124:function(e,t,a){},266:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(118),i=a.n(o);a(124),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(26),l=a(27),c=a(30),u=a(28),h=a(31),m=a(47),d=a(29),f=(a(78),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){return function(t){a.setState(Object(d.a)({},e,parseFloat(t.target.value)),function(){return a.props.onChange(a.state)})}},a.state=Object(m.a)({},e.formData),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.lat,a=e.lon;return r.a.createElement("div",null,r.a.createElement("div",null,"This is a simple custom field"),r.a.createElement("div",null,r.a.createElement("span",{className:"input"},"lat: ",r.a.createElement("input",{type:"number",value:t,onChange:this.onChange("lat")})),r.a.createElement("span",{className:"input"},"lon: ",r.a.createElement("input",{type:"number",value:a,onChange:this.onChange("lon")}))))}}]),t}(r.a.Component)),p=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){return function(t){a.setState(Object(d.a)({},e,parseFloat(t.target.value)),function(){return a.props.onChange(a.state)})}},a.state=Object(m.a)({},e.formData),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.formData,t=e.lat,a=e.lon;return r.a.createElement("div",null,r.a.createElement("div",null,"This is a simple custom field"),r.a.createElement("div",null,r.a.createElement("span",{className:"input"},"lat: ",r.a.createElement("input",{type:"number",value:t,onChange:this.onChange("lat")})),r.a.createElement("span",{className:"input"},"lon: ",r.a.createElement("input",{type:"number",value:a,onChange:this.onChange("lon")}))))}}]),t}(r.a.Component),g=a(48),v=a.n(g),b={type:"object",required:[],properties:{thing:{type:"array",title:"Coordinate List - Try Reordering",items:{type:"object",required:[],properties:{lat:{type:"number"},lon:{type:"number"}}}}}},E={geoLS:f,geoP:p},y={thing:{items:{"ui:field":"geoLS"}}},w={thing:{items:{"ui:field":"geoP"}}},C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.setState({formData:e})},a.state={formData:{thing:[{lat:10,lon:10},{lat:50,lon:60}]}},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.formData;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"RJS Form Custom Field Reordering Bug Demo"),r.a.createElement("hr",null),r.a.createElement("p",null,'My hunch is that RJS Form has a "derived state from props" issue.'),r.a.createElement("p",null,"If you instruct a custom field to use its own local state copy of form data as the source of truth (while also passing local change events up to the RJS form) then the fields will not understand or register array reorderings (since the reordering event is not captured in a field's local state - that order state is maintained in the parent of the custom field)."),r.a.createElement("p",null,'On the other hand, if you instruct custom fields to treat the form data props it receives from its parent as the source of truth, reorderings do register correctly... at face value. The issue is that after a reordering if you change a single property within the custom field, RJS will have fundamentally lost track of which custom field is which and will spit out erroneous formData on its onChange event handler (essentially believing that the unchanged property in the reordered custom field has the value of that prop in the "pre-reordering" custom field).'),r.a.createElement("p",null,"What follows is a demonstration of the two approaches described above. Three forms are displayed: a vanilla RJS form with no custom fields, a custom field RJS form in which the custom field uses its own local state as the source of truth and lastly a custom field RJS form in which the custom field uses the form data props it receives as the source of truth."),r.a.createElement("p",null,"All three forms are contained in a Container component which is maintaining control over the props fed into the Form components. The same form data is simultaneously fed into each of the three forms so that comparisons in behavior are easy to compare."),r.a.createElement("div",null,r.a.createElement("h2",null,"This is the basic form which does not use custom fields - reordering and editing work fine")),r.a.createElement(v.a,{schema:b,fields:E,formData:t,onChange:function(t){return e.onChange(t.formData)}}),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("h2",null,"This form uses custom fields and treats custom field local state as source of truth - reordering does not work but editing does")),r.a.createElement(v.a,{schema:b,uiSchema:y,fields:E,formData:t,onChange:function(t){return e.onChange(t.formData)}}),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("h2",null,"This form uses custom fields and treats parent props as source of truth - reordering works but editing a property after reordering into a different order than the initial state leads to unexpected changes in the prop not being edited by the user.")),r.a.createElement(v.a,{schema:b,uiSchema:w,fields:E,formData:t,onChange:function(t){return e.onChange(t.formData)}}))}}]),t}(r.a.Component);i.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},78:function(e,t,a){}},[[119,2,1]]]);
//# sourceMappingURL=main.80af6cd8.chunk.js.map